{% comment %} 
TO DO:
- Ensure the modal can be scrolled along with the page and is not fixed 

{% endcomment %}

<!-- The Button that triggers the modal -->
<div class="size-guide-container">
    <button id="open-size-guide" class="size-guide-link">Size guide</button>
  </div>
  
  <!-- The Modal Structure -->
  <div id="size-guide-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <div class="size-guide-content">
        <h3 class="modal-text">Size guide for {{ product.title }}</h3>
        <!-- Your dynamic size chart content will be inserted here -->
        <div class="size-chart modal-text">
          {{ product.metafields.custom.product_size_chart | raw }}

          {% comment %} Remove line 18 when all is fixed {% endcomment %}
  
          <!-- <img src="{{product.metafields.custom.size_mockup_image_xs | image_url }}}" height="400" width="400"> -->
  
          <!-- Size mockups section -->
          <div class="size-mockups">
            <h3>Select a size to view the mockup:</h3>
            <div class="size-buttons">
              <button
                class="show-mockup modal-text"
                data-size="xs"
                data-mockup="{{ product.metafields.custom.size_mockup_image_xs }}"
              >
                XS
              </button>
              <button
                class="show-mockup modal-text"
                data-size="s"
                data-mockup="{{ product.metafields.custom.size_mockup_image_s }}"
              >
                S
              </button>
              <button
                class="show-mockup modal-text"
                data-size="m"
                data-mockup="{{ product.metafields.custom.size_mockup_image_m }}"
              >
                M
              </button>
              <button
                class="show-mockup modal-text"
                data-size="l"
                data-mockup="{{ product.metafields.custom.size_mockup_image_l }}"
              >
                L
              </button>
              <button
                class="show-mockup modal-text"
                data-size="xl"
                data-mockup="{{ product.metafields.custom.size_mockup_image_xl }}"
              >
                XL
              </button>
            </div>
  
            <div class="mockup-container">
              <img id="mockup-img" src="" alt="Size Mockup" style="display:none;" height="400" width="400">
            </div>
            {% comment %} Image src is dynamically added with JS below {% endcomment %}
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Simplified CSS for the link-style button and modal -->
  <style>
      /* Container for the link, ensuring it's right aligned */
      .size-guide-container {
        text-align: right; /* Aligns the content to the right */
      }
  
      /* Link-style Button */
      .size-guide-link {
        background: none;
        border: none;
        color: #000; /* Default text color */
        text-decoration: underline; /* Underline like a text link */
        cursor: pointer;
        padding: 0;
        font-size: 1rem; /* Adjust size if needed */
        display: inline-block;
        margin: 0; /* Ensures no extra margin */
      }
  
      /* Modal Styling */
      .modal {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Dark background overlay */
      }
  
      .modal-content {
        background-color: white;
        margin: 15% auto;
        padding: 20px;
        border-radius: 8px;
        width: 50%; /* Modal width */
        text-align: center;
        position: relative; /* For positioning the close button inside */
      }
  
      @media (max-width: 768px) {
      .modal-content {
        width: 80%; /* Set the modal width to 80% on mobile screens */
      }
    }
  
      .modal-text {
        color: black;
        font-size: 1rem;
      }
  
      /* Close Button inside the modal box */
      .close-modal {
        position: absolute;
        right: 10px;
        top: 10px;
        font-size: 24px;
        cursor: pointer;
        color: #000; /* Close button color */
      }
  </style>
  
  <script>
      // JavaScript to handle modal behavior
    document.addEventListener('DOMContentLoaded', function () {
      const modal = document.getElementById('size-guide-modal');
      const btn = document.getElementById('open-size-guide');
      const closeBtn = document.querySelector('.close-modal');
  
      // Open the modal when the button is clicked
      btn.addEventListener('click', function () {
        modal.style.display = 'block';
      });
  
      // Close the modal when the "x" button is clicked
      closeBtn.addEventListener('click', function () {
        modal.style.display = 'none';
      });
  
      // Close the modal when clicking outside of the modal content
      window.addEventListener('click', function (event) {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
    });
  
    // JS to handle mock-up image behaviour
    document.addEventListener("DOMContentLoaded", function() {
        const buttons = document.querySelectorAll(".show-mockup");
        const mockupImg = document.getElementById("mockup-img");
  
        buttons.forEach(button => {
          button.addEventListener("click", function() {
            const mockupUrl = this.getAttribute("data-mockup");
            mockupImg.src = mockupUrl;
            mockupImg.style.display = "block";
          });
        });
      });
  </script>
  